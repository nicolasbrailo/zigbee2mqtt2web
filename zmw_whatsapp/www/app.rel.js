"use strict";class WhatsAppMonitor extends React.Component{static buildProps(){return{key:"WhatsAppMonitor"}}constructor(props){super(props);this.state={messages:null};this.fetchMessages=this.fetchMessages.bind(this)}async componentDidMount(){this.fetchMessages()}on_app_became_visible(){this.fetchMessages()}fetchMessages(){mJsonGet("/messages",res=>{this.setState({messages:res})})}formatTimestamp(isoString){const date=new Date(isoString);return date.toLocaleString()}render(){if(!this.state.messages){return React.createElement("div",{className:"app-loading"},"Loading...")}return React.createElement("div",{id:"WhatsAppMonitorContainer"},React.createElement("h3",null,React.createElement("img",{src:"/favicon.ico",alt:"WhatsappMqtt service"}),"WhatsApp Messages History"),this.state.messages.length===0?React.createElement("p",null,"No messages yet"):React.createElement("ul",null,this.state.messages.map((msg,idx)=>this.renderMessage(msg,idx))))}renderMessage(msg,idx){const directionStyle={color:"#4a90e2",fontWeight:"bold"};let messageContent="";let statusBadge=null;if(msg.type==="text"){messageContent=msg.text||"";if(msg.status==="not_implemented"){statusBadge=React.createElement("span",{style:{color:"#ff6b6b",marginLeft:"10px",fontSize:"0.9em"}},"[NOT IMPLEMENTED]")}}else if(msg.type==="photo"){messageContent=`ðŸ“· Photo: ${msg.path}`;if(msg.caption){messageContent+=` (${msg.caption})`}}return React.createElement("li",{key:idx},React.createElement("div",{style:{marginBottom:"5px"}},React.createElement("span",{style:directionStyle},"\u2192 Sent"),React.createElement("span",{style:{color:"#888",fontSize:"0.9em",marginLeft:"10px"}},this.formatTimestamp(msg.timestamp)),statusBadge),React.createElement("div",{style:{marginLeft:"20px",fontSize:"0.95em"}},messageContent))}}z2mStartReactApp("#app_root",WhatsAppMonitor);
