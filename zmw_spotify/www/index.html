<!DOCTYPE html>
<html>
<head>
<title>Spotify Service</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: sans-serif; padding: 20px; }
.info { background: #f0f0f0; padding: 10px; border-radius: 5px; margin: 10px 0; }
</style>
</head>
<body>
  <h1>MQTT Spotify Service</h1>
  <div class="info">
    <p>This service exposes Spotify control over MQTT.</p>
    <p><a href="/reauth">Reauthorize Spotify</a> if authentication has expired.</p>
  </div>
  <h2>Available MQTT Topics</h2>
  <h3>Query</h3>
  <ul>
    <li><code>mqtt_spotify/publish_state</code> - Publishes full state to <code>mqtt_spotify/state</code></li>
  </ul>
  <h3>Commands</h3>
  <ul>
    <li><code>mqtt_spotify/stop</code> - Stop playback</li>
    <li><code>mqtt_spotify/toggle_play</code> - Toggle play/pause</li>
    <li><code>mqtt_spotify/relative_jump_to_track</code> - Skip tracks (payload: {"value": N})</li>
    <li><code>mqtt_spotify/set_volume</code> - Set volume (payload: {"value": 0-100})</li>
  </ul>
  <h3>State Response</h3>
  <p>The <code>mqtt_spotify/state</code> topic publishes:</p>
  <pre>{
  "is_authenticated": true,
  "is_playing": true,
  "volume": 50,
  "media_info": {
    "title": "...",
    "artist": "...",
    "album_name": "...",
    "icon": "...",
    ...
  }
}</pre>
</body>
</html>
